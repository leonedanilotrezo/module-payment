define("underscore jquery ko mage/translate Dholi_Payment/js/payment Magento_Checkout/js/model/quote Dholi_Payment/js/payform Dholi_Payment/js/checkout Magento_Checkout/js/action/get-totals Magento_Checkout/js/model/full-screen-loader".split(" "),function(r,f,k,g,m,h,c,e,n,l){var p=k.observable(null);return m.extend({defaults:{creditCardBrand:"",creditCardBrandIcon:"",creditCardExpiry:"",creditCardCvv:"",creditCardNumber:"",creditCardNumberStatus:"",creditCardExpiryStatus:"",creditCardCvvStatus:""},
installments:k.observableArray(),initialize:function(){this._super();var a=this;this.creditCardNumber.subscribe(function(b){a.creditCardNumberStatusListen(b);a.paymentErrors(""!=a.creditCardNumberStatus()?g("Invalid Credit Card Number"):"")});p.subscribe(function(){a.clearCreditCardInfo()},null,"change");h.paymentMethod.subscribe(function(){a.clearCreditCardInfo()},null,"change");h.shippingMethod.subscribe(function(){a.clearCreditCardInfo()},null,"change")},clearCreditCardInfo:function(){this.creditCardNumber("");
this.creditCardBrand("");this.creditCardBrandIcon("");this.creditCardExpiry("");this.creditCardCvv("");this.installments.removeAll()},initObservable:function(){this._super().observe("creditCardBrand creditCardBrandIcon creditCardNumber creditCardExpiry creditCardCvv installments creditCardNumberStatus creditCardExpiryStatus creditCardCvvStatus injectPaymentBehavior".split(" "));return this},creditCardNumberStatusListen:function(a){var b=this.status.INITIAL;if(a){var d=c.parseCardType(a);if(d){this.creditCardBrand(d);
d=c.lengthFromType(d);var q=a.match(/[0-9]+/g).join([]).length;-1<d.indexOf(q)&&(b=c.validateCardNumber(a)?this.status.SUCCESS:this.status.ERROR)}this.isShowCreditCardBrandIcon()&&(a=window.checkoutConfig.payment[this.getCode()].icons.brands[this.creditCardBrand()],void 0!==a&&this.creditCardBrandIcon(a))}this.creditCardNumberStatus(b)},creditCardExpiryStatusListen:function(){var a=this.status.INITIAL,b=this.creditCardExpiry();b&&(a=c.parseCardExpiry(b),a=c.validateCardExpiry(a)?this.status.SUCCESS:
this.status.ERROR);this.creditCardExpiryStatus(a)},creditCardCvvStatusListen:function(){var a=this.status.INITIAL,b=this.creditCardCvv();b&&(a=c.validateCardCVC(b,this.creditCardBrand)?this.status.SUCCESS:this.status.ERROR);this.creditCardCvvStatus(a)},getVaultCode:function(){return window.checkoutConfig.payment[this.getCode()].ccVaultCode},injectPaymentBehavior:function(){var a=document.getElementById(this.getCode().concat("_number")),b=document.getElementById(this.getCode().concat("_expiry")),d=
document.getElementById(this.getCode().concat("_cvv"));c.cardNumberInput(a);c.expiryInput(b);c.cvcInput(d)},getTotalOrderAmountForInstallments:function(){return e.getTotalOrderAmountForInstallments()},getFirstInstallmentAmount:function(){return e.getFirstInstallmentAmount()},getMinInstallment:function(){return e.getMinInstallment()},getPercentualDiscount:function(){return e.getPercentualDiscount()},isShowCreditCardBrandIcon:function(){return window.checkoutConfig.payment[this.getCode()].icons.show},
reloadTotals:function(){l.startLoader();f.ajax({dataType:"json",method:"POST",data:{"payment[method]":h.paymentMethod().method,"payment[cc_installments]":f("#".concat(this.getCode()).concat("_installments")).val(),"payment[shipping_amount]":this.getShippingAmount()},url:this.getPaymentUrl(),context:document.body}).done(function(a){n([],f.Deferred())}).fail().always(function(){l.stopLoader()})},getCvvImageUrl:function(){return window.checkoutConfig.payment[this.getCode()].url.cvv},getCvvImageHtml:function(){return'<img src="'+
this.getCvvImageUrl()+'" alt="'+g("Card Verification Number Visual Reference")+'" title="'+g("Card Verification Number Visual Reference")+'" />'}})});
