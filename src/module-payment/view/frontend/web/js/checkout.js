define(["underscore","jquery","ko","Magento_Checkout/js/model/quote","Magento_Checkout/js/model/totals","Magento_Catalog/js/price-utils"],function(c,e,b,a,d,g){let totals=a.getTotals();let couponCode=b.observable(null);let code=null;return{setCode:function(h){this.code=h},getCode:function(){return this.code},placeOrderTotalOrderAmount:function(){if(totals()){couponCode(totals()["coupon_code"])}let amount=this.getTotalOrderAmount();let f=g.formatPrice(amount,a.getPriceFormat());return e.mage.__("Pagar %1").replace("%1",f)},getTotalOrderAmount:function(){let amount=0;if(totals()){amount=d.getSegment("grand_total").value}return amount},getShippingAmount:function(){let amount=0;if(totals()){amount=d.getSegment("shipping").value}return amount},getDholiInterest:function(){let amount=0;if(totals()){amount=d.getSegment("dholi_interest").value}return amount},getDholiDiscount:function(){let amount=0;if(totals()){amount=Math.abs(d.getSegment("dholi_discount").value)}return amount},getTotalOrderAmountForInstallments:function(){let amount=(this.getTotalOrderAmount()-this.getDholiInterest())+this.getDholiDiscount();return amount},getFirstInstallmentAmount:function(){let baseGrandTotal,installmentAmount=0;if(totals()){baseGrandTotal=this.getTotalOrderAmount();baseGrandTotal=(baseGrandTotal-this.getDholiInterest())+this.getDholiDiscount()}installmentAmount=baseGrandTotal;if(this.getPercentualDiscount()>0){let baseShippingAmount=this.getShippingAmount();installmentAmount=baseGrandTotal-(((baseGrandTotal-baseShippingAmount)*this.getPercentualDiscount())/100)}return installmentAmount},getTotalInstallments:function(){return window.checkoutConfig.payment[this.getCode()].totalInstallments},getMinInstallment:function(){return window.checkoutConfig.payment[this.getCode()].minInstallment},getPercentualDiscount:function(){return window.checkoutConfig.payment[this.getCode()].percentualDiscount},getInstallmentsUrl:function(){return window.checkoutConfig.payment[this.getCode()].url.installments},getPaymentUrl:function(){return window.checkoutConfig.payment.dholi_payments.paymentMethodUrl}}});